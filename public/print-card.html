<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="/lib/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jsbarcode/3.6.0/barcodes/JsBarcode.code128.min.js"></script>
    <title>Print Card</title>
</head>

<style>
    @page {
        /* dimensions for the whole page */
        size: 54mm 86mm  landscape;
        
        margin: 0;
    }


    

    body {
        /* A5 dimensions */
        height: 54mm;
        width: 86mm;

        margin: 0;
    }

    /* fill half the height with each face */
    .face {
        height: 50%;
        width: 100%;
        position: relative;
    }

    /* the back face */
    .face-back {
        background: #f6f6f6;
    }

    /* the front face */
    .face-front {
        background: #fff;
    }

    /* an image that fills the whole of the front face */
    .face-front img {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        width: 100%;
        height: 100%;
    }
</style>

<body style="background: white;">
    <div
        style="color: #2B2B2B;width: 100%;height: 100%;display: flex; flex-direction: column;justify-content: flex-end;align-items: center;">

        <div
            style="display: flex;align-items: center;padding : 24px;justify-content: space-between;box-sizing: border-box;width : 100%;">

            <div>
                <p style="margin : 0;font-size: 22px;" id="name"></p>
                <p style="margin : 0;font-size : 16px;color :#888;" id="expirationDate"></p>
            </div>

            <svg style="height : 50px;width : 120px;" id="barcode"></svg>

        </div>

    </div>
</body>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        let params = getUrlQueryParameters();
        document.getElementById('name').innerText = params.name ? params.name : '';
        //document.getElementById('id').innerText = params.id ? params.id : '';
        document.getElementById('expirationDate').innerText = params.expirationDate ? params.expirationDate : ''

        JsBarcode("#barcode", params.id);
    });

    function getUrlQueryParameters() {
        let GET = {};
        let query = window.location.search.substring(1).split("&");
        for (let i = 0, max = query.length; i < max; i++) {
            if (query[i] === "")
                continue;
            let param = query[i].split("=");
            GET[decodeURIComponent(param[0])] = decodeURIComponent(param[1] || "");
        }
        return GET;
    }
</script>

</html>